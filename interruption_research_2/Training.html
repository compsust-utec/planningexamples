{{ block content }}

<style>
  .extra-data {
    display: none;
  }

  .side-section {
    margin-bottom: 30px;
  }

  .wip-elem {
    cursor: pointer;
  }

  .email-msg {
    cursor: pointer;
  }

  .email-msg:hover {
    color: #212529;
    background-color: rgba(0, 0, 0, .075);
  }

  .email-msg p {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .case-section {
    margin-bottom: 30px;
  }

  .tb-codigo {
    width: 15%;
  }

  .tb-nombre {
    width: 17%;
  }

  .tb-apellido {
    width: 18%;
  }

  .tb-seguro {
    width: 20%;
  }

  .tb-fecha {
    width: 30%;
  }

  .tb-data-row {
    width: 100%;
    display: inline-flex;
  }

  .open-inbox {
    display: none;
  }
</style>

<div class="row">
  <div id="case-container" class="col-12 close-inbox">
  </div>
</div>

<script>
  var simple_template = `
    <div id="case-{case_id}" class="case">
        <div class="case-section">
          <h3>{case_asunto}</h3>
          <p>
            {case_texto}
          </p>
        </div>
        <div class="case-section">
          <h3>Base de datos</h3>
          <table class="table">
            <thead style="display: block;">
              <tr>
                <th class="tb-codigo">Código</th>
                <th class="tb-nombre">Nombre</th>
                <th class="tb-apellido">Apellido</th>
                <th class="tb-seguro">Tipo de seguro</th>
                <th class="tb-fecha">Fecha de vencimiento (día/mes/año)</th>
                <th style="width: 0;"></th>
              </tr>
            </thead>
            <tbody style="height: 150px; overflow-y: auto; width: 100%; display: block;">
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-001</td>
                <td class="tb-nombre">Adrian</td>
                <td class="tb-apellido">Molina</td>
                <td class="tb-seguro">Plan Oro</td>
                <td class="tb-fecha">01/10/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-002</td>
                <td class="tb-nombre">Alvaro</td>
                <td class="tb-apellido">Maldonado</td>
                <td class="tb-seguro">Plan Plata</td>
                <td class="tb-fecha">01/11/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-003</td>
                <td class="tb-nombre">Maria</td>
                <td class="tb-apellido">Sinfuentes</td>
                <td class="tb-seguro">Plan Diamante</td>
                <td class="tb-fecha">01/12/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-004</td>
                <td class="tb-nombre">Jimena</td>
                <td class="tb-apellido">Miller</td>
                <td class="tb-seguro">Plan Regular</td>
                <td class="tb-fecha">01/01/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-005</td>
                <td class="tb-nombre">Sofia</td>
                <td class="tb-apellido">Davis</td>
                <td class="tb-seguro">Plan Plata</td>
                <td class="tb-fecha">01/02/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-006</td>
                <td class="tb-nombre">Valeria</td>
                <td class="tb-apellido">Jimenez</td>
                <td class="tb-seguro">Plan Diamante</td>
                <td class="tb-fecha">01/03/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-007</td>
                <td class="tb-nombre">Chistopher</td>
                <td class="tb-apellido">Rosales</td>
                <td class="tb-seguro">Plan Regular</td>
                <td class="tb-fecha">01/04/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-008</td>
                <td class="tb-nombre">Micaela</td>
                <td class="tb-apellido">Harris</td>
                <td class="tb-seguro">Plan Regular</td>
                <td class="tb-fecha">01/05/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-009</td>
                <td class="tb-nombre">Abraham</td>
                <td class="tb-apellido">Smith</td>
                <td class="tb-seguro">Plan Plata</td>
                <td class="tb-fecha">01/08/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-010</td>
                <td class="tb-nombre">Paty</td>
                <td class="tb-apellido">Jimenez</td>
                <td class="tb-seguro">Plan Oro</td>
                <td class="tb-fecha">01/07/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-011</td>
                <td class="tb-nombre">Astrid</td>
                <td class="tb-apellido">Wilson</td>
                <td class="tb-seguro">Plan Oro</td>
                <td class="tb-fecha">01/08/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-012</td>
                <td class="tb-nombre">Jesus</td>
                <td class="tb-apellido">Walker</td>
                <td class="tb-seguro">Plan Diamante</td>
                <td class="tb-fecha">01/09/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-013</td>
                <td class="tb-nombre">Fernanda</td>
                <td class="tb-apellido">Santos</td>
                <td class="tb-seguro">Plan Regular</td>
                <td class="tb-fecha">01/10/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-014</td>
                <td class="tb-nombre">Alannis</td>
                <td class="tb-apellido">Diaz</td>
                <td class="tb-seguro">Plan Plata</td>
                <td class="tb-fecha">01/11/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-015</td>
                <td class="tb-nombre">Nickole</td>
                <td class="tb-apellido">Rojas</td>
                <td class="tb-seguro">Plan Diamante</td>
                <td class="tb-fecha">01/03/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-016</td>
                <td class="tb-nombre">William</td>
                <td class="tb-apellido">Rivera</td>
                <td class="tb-seguro">Plan Regular</td>
                <td class="tb-fecha">01/08/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-017</td>
                <td class="tb-nombre">Vanessa</td>
                <td class="tb-apellido">Arteaga</td>
                <td class="tb-seguro">Plan Regular</td>
                <td class="tb-fecha">01/05/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-018</td>
                <td class="tb-nombre">Beatriz</td>
                <td class="tb-apellido">Brown</td>
                <td class="tb-seguro">Plan Plata</td>
                <td class="tb-fecha">01/08/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-019</td>
                <td class="tb-nombre">Patrick</td>
                <td class="tb-apellido">Jones</td>
                <td class="tb-seguro">Plan Oro</td>
                <td class="tb-fecha">01/07/2022</td>
              </tr>
              <tr class="tb-data-row">
                <td class="tb-codigo">BXD-020</td>
                <td class="tb-nombre">Benny</td>
                <td class="tb-apellido">Garcia</td>
                <td class="tb-seguro">Plan Plata</td>
                <td class="tb-fecha">01/08/2022</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="case-section">
          <h3>Tipos de seguros:</h3>
          <table class="table">
            <thead>
              <tr>
                <th>Plan Diamante</th>
                <th>Plan Oro</th>
                <th>Plan Plata</th>
                <th>Plan Regular</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <ul>
                    <li>Robo 100%</li>
                    <li>Daños a terceras personas 100%</li>
                    <li>Accidentes Personales</li>
                    <li>Servicios Adicionales</li>
                  </ul>
                </td>
                <td>
                  <ul>
                    <li>Robo 100%</li>
                    <li>Daños a terceras personas 75%</li>
                    <li>Accidentes Personales</li>
                    <li>Servicios Adicionales</li>
                  </ul>
                </td>
                <td>
                  <ul>
                    <li>Robo 75%</li>
                    <li>Daños a terceras personaS 50%</li>
                  </ul>
                </td>
                <td>
                  <ul>
                    <li>Robo 50%</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="case-section">
          <h3>Detalle de servicios</h3>
          <img src="{{ static 'services_detail.png' }}" />
        </div>
        <div class="case-section">
          <h3>Preguntas</h3>
          <div class="row">
            <div class="col">
              <h4>Paso 1: Datos del reclamante</h4>
              <p>Lea el reclamo individual y complete los siguientes datos:</p>
              <div class="mb-3">
                <label for="formGroupExampleInput" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="id_case_{case_id}_step_1_nombre" name="case_{case_id}_step_1_nombre" required="" value="">
                <div id="case_{case_id}_step_1_nombre-error" class="invalid-feedback">
                  Respuesta Incorrecta
                </div>
              </div>
              <div class="mb-3">
                <label for="formGroupExampleInput" class="form-label">Apellido</label>
                <input type="text" class="form-control" id="id_case_{case_id}_step_1_apellido" name="case_{case_id}_step_1_apellido" required="" value="">
                <div id="case_{case_id}_step_1_apellido-error" class="invalid-feedback">
                  Respuesta Incorrecta
                </div>
              </div>
              <div class="mb-3">
                <label for="formGroupExampleInput" class="form-label">Código</label>
                <input type="text" class="form-control" id="id_case_{case_id}_step_1_codigo" name="case_{case_id}_step_1_codigo" required="" value="">
                <div id="case_{case_id}_step_1_codigo-error" class="invalid-feedback">
                  Respuesta Incorrecta
                </div>
              </div>
              <div class="mb-3">
                <label for="formGroupExampleInput" class="form-label">Tipo de seguro</label>
                <input type="text" class="form-control" id="id_case_{case_id}_step_1_tipo_seguro" name="case_{case_id}_step_1_tipo_seguro" required="" value="">
                <div id="case_{case_id}_step_1_tipo_seguro-error" class="invalid-feedback">
                  Respuesta Incorrecta
                </div>
              </div>
              <div class="mb-3">
                <label for="formGroupExampleInput" class="form-label">Fecha de vencimiento</label>
                <input type="date" class="form-control" id="id_case_{case_id}_step_1_fecha_vencimiento" name="case_{case_id}_step_1_fecha_vencimiento" required="" value="">
                <div id="case_{case_id}_step_1_fecha_vencimiento-error" class="invalid-feedback">
                  Respuesta Incorrecta
                </div>
              </div>
              <br><br>
              <h4>Paso 2: Datos básicos del seguro</h4>
              <p>Por favor busque en la base de datos de asegurados.</p>
              <p>¿Sigue activo el seguro? Presta atención a la fecha de caducidad.</p>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_1-0" name="case_{case_id}_step_2_1" required="" value="1">
                <label for="id_case_{case_id}_step_2_1-0" class="form-check-label">Si</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_1-1" name="case_{case_id}_step_2_1" required="" value="2">
                <label for="id_case_{case_id}_step_2_1-1" class="form-check-label">No</label>
              </div>
              <div id="case_{case_id}_step_2_1-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
              <br>
              <p>Seleccione el tipo de plan de seguro</p>
              <div id="id_case_{case_id}_step_2_2" required="">
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_2-0" name="case_{case_id}_step_2_2" required="" value="1">
                  <label for="id_case_{case_id}_step_2_2-0">Plan Diamante</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_2-1" name="case_{case_id}_step_2_2" required="" value="2">
                  <label for="id_case_{case_id}_step_2_2-1">Plan Oro</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_2-2" name="case_{case_id}_step_2_2" required="" value="3">
                  <label for="id_case_{case_id}_step_2_2-2">Plan Plata</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_2-3" name="case_{case_id}_step_2_2" required="" value="4">
                  <label for="id_case_{case_id}_step_2_2-3">Plan Regular</label>
                </div>
              </div>
              <div id="case_{case_id}_step_2_2-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
              <br><br>
              <h4>Paso 3: Verificación de cobertura</h4>
              <p>Lea el reclamo y verifique si el plan incluye cobertura para ese reclamo de acuerdo con los "Tipos de
                seguro".</p>
              <p>Luego responde lo siguiente:</p>
              <p>¿El siniestro está cubierto por el plan de seguro? Presta atención a la tabla "Tipos de seguros" (Revisar
                los servicios)</p>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_3_1-0" name="case_{case_id}_step_3_1" required="" value="1">
                <label for="id_case_{case_id}_step_3_1-0" class="form-check-label">Si</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_3_1-1" name="case_{case_id}_step_3_1" required="" value="2">
                <label for="id_case_{case_id}_step_3_1-1" class="form-check-label">No</label>
              </div>
              <div id="case_{case_id}_step_3_1-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <div class="col">
              <h4>Paso 4: Decisión de conceder el reclamo</h4>
              <p>Si y solo si, el seguro aún está activo y el reclamo está cubierto, entonces la decisión debe ser que el
                reclamo sea aprobado (o concedido).</p>
              <p>Si el reclamo no está activo o si el seguro no está cubierto, la decisión debe ser que se rechace el
                reclamo.</p>
              <p>La decisión de conceder los reclamos son:</p>
              <div id="id_case_{case_id}_step_4_1" required="">
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="id_case_{case_id}_step_4_1-0" name="case_{case_id}_step_4_1" required="" value="1">
                  <label for="id_case_{case_id}_step_4_1-0">El reclamo es aceptado</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="id_case_{case_id}_step_4_1-1" name="case_{case_id}_step_4_1" required="" value="2">
                  <label for="id_case_{case_id}_step_4_1-1">El reclamo es rechazado</label>
                </div>
              </div>
              <div id="case_{case_id}_step_4_1-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
              <br><br>
              <h4>Paso 5: Explicación</h4>
              <p>Escriba la razón por la cual no ha procedido el reclamo. Por favor Copie y Pegue el siguiente texto y
                complete la información correspondiente:</p>
              <p>
                Estimado *introduce nombre de cliente* Su reclamo "ha/no ha" sido aceptado. Tiene seguro del tipo
                *introduce tipo de seguro* e *incluye/no incluye* el servicio de *daño de partes terceras/robo/accidentes
                personales/servicios adicionales* (2) Su seguro de automóvil ha/no ha expirado. Si tiene alguna pregunta,
                espero sus comentarios. Saludos.
              </p>
              <textarea class="form-control" rows="15" id="id_case_{case_id}_step_5_1" name="case_{case_id}_step_5_1" required="" value=""></textarea>
              <div id="case_{case_id}_step_5_1-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12" style="text-align:right">
              <button type="button" onclick="case_validate_button({case_id})" class="btn btn-primary">
                Validar caso
              </button>
            </div>
          </div>
        </div>
      </div>
  `;

  var complex_template = `
  <div id="case-{case_id}" class="case">
      <div class="case-section">
        <h3>{case_asunto}</h3>
        <p>
          {case_texto}
        </p>
      </div>
      <div class="case-section">
        <h3>Informe técnico: Guía para validar la veracidad del correo electrónico</h3>
        <img src="/static/{case_reporte}" />
      </div>
      <div class="case-section">
        <h3>Base de datos</h3>
        <table class="table">
          <thead style="display: block;">
            <tr>
              <th class="tb-codigo">Código</th>
              <th class="tb-nombre">Nombre</th>
              <th class="tb-apellido">Apellido</th>
              <th class="tb-seguro">Tipo de seguro</th>
              <th class="tb-fecha">Fecha de vencimiento (día/mes/año)</th>
              <th style="width: 0;"></th>
            </tr>
          </thead>
          <tbody style="height: 150px; overflow-y: auto; width: 100%; display: block;">
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-001</td>
              <td class="tb-nombre">Adrian</td>
              <td class="tb-apellido">Molina</td>
              <td class="tb-seguro">Plan Oro</td>
              <td class="tb-fecha">01/10/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-002</td>
              <td class="tb-nombre">Alvaro</td>
              <td class="tb-apellido">Maldonado</td>
              <td class="tb-seguro">Plan Plata</td>
              <td class="tb-fecha">01/11/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-003</td>
              <td class="tb-nombre">Maria</td>
              <td class="tb-apellido">Sinfuentes</td>
              <td class="tb-seguro">Plan Diamante</td>
              <td class="tb-fecha">01/12/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-004</td>
              <td class="tb-nombre">Jimena</td>
              <td class="tb-apellido">Miller</td>
              <td class="tb-seguro">Plan Regular</td>
              <td class="tb-fecha">01/01/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-005</td>
              <td class="tb-nombre">Sofia</td>
              <td class="tb-apellido">Davis</td>
              <td class="tb-seguro">Plan Plata</td>
              <td class="tb-fecha">01/02/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-006</td>
              <td class="tb-nombre">Valeria</td>
              <td class="tb-apellido">Jimenez</td>
              <td class="tb-seguro">Plan Diamante</td>
              <td class="tb-fecha">01/03/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-007</td>
              <td class="tb-nombre">Chistopher</td>
              <td class="tb-apellido">Rosales</td>
              <td class="tb-seguro">Plan Regular</td>
              <td class="tb-fecha">01/04/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-008</td>
              <td class="tb-nombre">Micaela</td>
              <td class="tb-apellido">Harris</td>
              <td class="tb-seguro">Plan Regular</td>
              <td class="tb-fecha">01/05/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-009</td>
              <td class="tb-nombre">Abraham</td>
              <td class="tb-apellido">Smith</td>
              <td class="tb-seguro">Plan Plata</td>
              <td class="tb-fecha">01/08/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-010</td>
              <td class="tb-nombre">Paty</td>
              <td class="tb-apellido">Jimenez</td>
              <td class="tb-seguro">Plan Oro</td>
              <td class="tb-fecha">01/07/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-011</td>
              <td class="tb-nombre">Astrid</td>
              <td class="tb-apellido">Wilson</td>
              <td class="tb-seguro">Plan Oro</td>
              <td class="tb-fecha">01/08/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-012</td>
              <td class="tb-nombre">Jesus</td>
              <td class="tb-apellido">Walker</td>
              <td class="tb-seguro">Plan Diamante</td>
              <td class="tb-fecha">01/09/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-013</td>
              <td class="tb-nombre">Fernanda</td>
              <td class="tb-apellido">Santos</td>
              <td class="tb-seguro">Plan Regular</td>
              <td class="tb-fecha">01/10/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-014</td>
              <td class="tb-nombre">Alannis</td>
              <td class="tb-apellido">Diaz</td>
              <td class="tb-seguro">Plan Plata</td>
              <td class="tb-fecha">01/11/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-015</td>
              <td class="tb-nombre">Nickole</td>
              <td class="tb-apellido">Rojas</td>
              <td class="tb-seguro">Plan Diamante</td>
              <td class="tb-fecha">01/03/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-016</td>
              <td class="tb-nombre">William</td>
              <td class="tb-apellido">Rivera</td>
              <td class="tb-seguro">Plan Regular</td>
              <td class="tb-fecha">01/08/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-017</td>
              <td class="tb-nombre">Vanessa</td>
              <td class="tb-apellido">Arteaga</td>
              <td class="tb-seguro">Plan Regular</td>
              <td class="tb-fecha">01/05/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-018</td>
              <td class="tb-nombre">Beatriz</td>
              <td class="tb-apellido">Brown</td>
              <td class="tb-seguro">Plan Plata</td>
              <td class="tb-fecha">01/08/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-019</td>
              <td class="tb-nombre">Patrick</td>
              <td class="tb-apellido">Jones</td>
              <td class="tb-seguro">Plan Oro</td>
              <td class="tb-fecha">01/07/2022</td>
            </tr>
            <tr class="tb-data-row">
              <td class="tb-codigo">BXD-020</td>
              <td class="tb-nombre">Benny</td>
              <td class="tb-apellido">Garcia</td>
              <td class="tb-seguro">Plan Plata</td>
              <td class="tb-fecha">01/08/2022</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="case-section">
        <h3>Tipos de seguros:</h3>
        <table class="table">
          <thead>
            <tr>
              <th>Plan Diamante</th>
              <th>Plan Oro</th>
              <th>Plan Plata</th>
              <th>Plan Regular</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <ul>
                  <li>Robo 100%</li>
                  <li>Daños a terceras personas 100%</li>
                  <li>Accidentes Personales</li>
                  <li>Servicios Adicionales</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>Robo 100%</li>
                  <li>Daños a terceras personas 75%</li>
                  <li>Accidentes Personales</li>
                  <li>Servicios Adicionales</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>Robo 75%</li>
                  <li>Daños a terceras personaS 50%</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>Robo 50%</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="case-section">
        <h3>Detalle de servicios</h3>
        <img src="{{ static 'services_detail.png' }}" />
      </div>
      <div class="case-section">
        <h3>Preguntas</h3>
        <div class="row">
          <div class="col">
            <h4>Paso 1: Datos del reclamante</h4>
            <p>Lea el reclamo individual y complete los siguientes datos:</p>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="id_case_{case_id}_step_1_nombre" name="case_{case_id}_step_1_nombre" required="" value="">
              <div id="case_{case_id}_step_1_nombre-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Apellido</label>
              <input type="text" class="form-control" id="id_case_{case_id}_step_1_apellido" name="case_{case_id}_step_1_apellido" required="" value="">
              <div id="case_{case_id}_step_1_apellido-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Código</label>
              <input type="text" class="form-control" id="id_case_{case_id}_step_1_codigo" name="case_{case_id}_step_1_codigo" required="" value="">
              <div id="case_{case_id}_step_1_codigo-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Tipo de seguro</label>
              <input type="text" class="form-control" id="id_case_{case_id}_step_1_tipo_seguro" name="case_{case_id}_step_1_tipo_seguro" required="" value="">
              <div id="case_{case_id}_step_1_tipo_seguro-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Fecha de vencimiento</label>
              <input type="date" class="form-control" id="id_case_{case_id}_step_1_fecha_vencimiento" name="case_{case_id}_step_1_fecha_vencimiento" required="" value="">
              <div id="case_{case_id}_step_1_fecha_vencimiento-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <br><br>
            <h4>Paso 2: Datos básicos del seguro</h4>
            <p>Por favor busque en la base de datos de asegurados.</p>
            <p>¿Sigue activo el seguro? Presta atención a la fecha de caducidad.</p>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_1-0" name="case_{case_id}_step_2_1" required="" value="1">
                <label for="id_case_{case_id}_step_2_1-0" class="form-check-label">Si</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_1-1" name="case_{case_id}_step_2_1" required="" value="2">
                <label for="id_case_{case_id}_step_2_1-1" class="form-check-label">No</label>
            </div>
            <div id="case_{case_id}_step_2_1-error" class="invalid-feedback">
              Respuesta Incorrecta
            </div>
            <br>
            <p>Seleccione el tipo de plan de seguro</p>
            <div id="id_case_{case_id}_step_2_2" required="">
              <div class="form-check">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_2-0" name="case_{case_id}_step_2_2" required="" value="1">
                <label for="id_case_{case_id}_step_2_2-0">Plan Diamante</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_2-1" name="case_{case_id}_step_2_2" required="" value="2">
                <label for="id_case_{case_id}_step_2_2-1">Plan Oro</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_2-2" name="case_{case_id}_step_2_2" required="" value="3">
                <label for="id_case_{case_id}_step_2_2-2">Plan Plata</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_2_2-3" name="case_{case_id}_step_2_2" required="" value="4">
                <label for="id_case_{case_id}_step_2_2-3">Plan Regular</label>
              </div>
            </div>
            <div id="case_{case_id}_step_2_2-error" class="invalid-feedback">
              Respuesta Incorrecta
            </div>
            <br><br>
            <h4>Paso 3: Verificación de cobertura</h4>
            <p>Lea el reclamo y verifique si el plan incluye cobertura para ese reclamo de acuerdo con los "Tipos de
              seguro".</p>
            <p>Luego responde lo siguiente:</p>
            <p>¿El siniestro está cubierto por el plan de seguro? Presta atención a la tabla "Tipos de seguros" (Revisar
              los servicios)</p>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_3_1-0" name="case_{case_id}_step_3_1" required="" value="1">
                <label for="id_case_{case_id}_step_3_1-0" class="form-check-label">Si</label>
            </div>
            
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_3_1-1" name="case_{case_id}_step_3_1" required="" value="2">
                <label for="id_case_{case_id}_step_3_1-1" class="form-check-label">No</label>
            </div>
            <div id="case_{case_id}_step_3_1-error" class="invalid-feedback">
              Respuesta Incorrecta
            </div>
            <br><br>
            
            <h4>Paso 4: Informe técnico</h4>
            <p>Por favor, lea el Informe Técnico como complemento del reclamo.</p>
            <p>Complete los datos del tercero afectado según el Informe Técnico:</p>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Propietario del vehículo:</label>
              <input type="text" class="form-control" id="id_case_{case_id}_step_4_propietario" name="case_{case_id}_step_4_propietario" required="" value="">
              <div id="case_{case_id}_step_4_propietario-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Nombre completo del conductor:</label>
              <input type="text" class="form-control" id="id_case_{case_id}_step_4_nombre" name="case_{case_id}_step_4_nombre" required="" value="">
              <div id="case_{case_id}_step_4_nombre-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Dirección del conductor:</label>
              <input type="text" class="form-control" id="id_case_{case_id}_step_4_direccion" name="case_{case_id}_step_4_direccion" required="" value="">
              <div id="case_{case_id}_step_4_direccion-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Placa:</label>
              <input type="text" class="form-control" id="id_case_{case_id}_step_4_placa" name="case_{case_id}_step_4_placa" required="" value="">
              <div id="case_{case_id}_step_4_placa-error" class="invalid-feedback">
                Respuesta Incorrecta
              </div>
            </div>
          </div>
          <div class="col">
            <h4>Paso 5:</h4>
            <p>Por favor compare el reclamo con el Informe Técnico. En particular, preste atención a la fecha del
              accidente, nombre, apellido y la descripción del accidente . Si alguno de estos es diferente, indíquelo
              respondiendo a la siguiente pregunta:</p>
            <p>¿La afirmación es consistente con el Informe Técnico?</p>
            <div id="id_case_{case_id}_step_5_1" required="">
              <div class="form-check">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_5_1-0" name="case_{case_id}_step_5_1" required="" value="1">
                <label for="id_case_{case_id}_step_5_1-0">Sí, la información proporcionada en el reclamo es consistente con el Informe Técnico.</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_5_1-1" name="case_{case_id}_step_5_1" required="" value="2">
                <label for="id_case_{case_id}_step_5_1-1">No, la información proporcionada en el reclamo es inconsistente con el Informe Técnico.</label>
              </div>
            </div>
            <div id="case_{case_id}_step_5_1-error" class="invalid-feedback">
              Respuesta Incorrecta
            </div>
            <br><br>
            <h4>Paso 6: Decisión de conceder el reclamo</h4>
            <p>Si y solo si el seguro aún está activo, el reclamo está cubierto y la información del reclamo es
              consistente con el Informe Técnico, entonces la decisión debe ser que el reclamo sea aprobado (o
              concedido). Si el reclamo no está activo o si el seguro no está cubierto, la decisión debe ser que se
              rechace el reclamo.</p>
            <p>La decisión de conceder los reclamos son:</p>
            <div id="id_case_{case_id}_step_6_1" required="">
              <div class="form-check">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_6_1-0" name="case_{case_id}_step_6_1" required="" value="1">
                <label for="id_case_{case_id}_step_6_1-0">El reclamo es aceptado</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="id_case_{case_id}_step_6_1-1" name="case_{case_id}_step_6_1" required="" value="2">
                <label for="id_case_{case_id}_step_6_1-1">El reclamo es rechazado</label>
              </div>
            </div>
            <div id="case_{case_id}_step_6_1-error" class="invalid-feedback">
              Respuesta Incorrecta
            </div>
            <br><br>
            <h4>Paso 7: Explicación</h4>
            <p>Escriba la razón por la cual no ha procedido el reclamo. Por favor Copie y Pegue el siguiente texto y
              complete la información correspondiente:</p>
            <p>
              Estimado *introduce nombre de cliente* Su reclamo "ha/no ha" sido aceptado. Tiene seguro del tipo *tipo de
              seguro* e "incluye/no incluye" el servicio de *daño de partes terceras/robo/accidentes
              personales/servicios adicionales* (2) Su seguro de automóvil "ha/no ha" expirado (3) Su correo electrónico
              está/no está de acuerdo con el informe técnico. Si tiene alguna pregunta, espero sus comentarios. Saludos.
            </p>
            <textarea class="form-control" rows="15" id="id_case_{case_id}_step_7_1" name="case_{case_id}_step_7_1" required="" value=""></textarea>
            <div id="case_{case_id}_step_7_1-error" class="invalid-feedback">
              Respuesta Incorrecta
            </div>
          </div>
        </div>
        <div class="row">
            <div class="col-md-12" style="text-align:right">
              <button type="button" onclick="case_validate_button({case_id})" class="btn btn-primary">
                Validar caso
              </button>
            </div>
          </div>
      </div>
    </div>
  `;

  var case_list = [
    {
      "Asunto": "Caso de entrenamiento",
      "Texto": "<b>Revisa este video para poder saber cómo realizar las tareas del experimento.<br> Enlace: https://drive.google.com/drive/folders/1_LE3x1o5IHyZ1Vi_kDv5cIAH9FbEny1Q</b> <br><br>Estimados señores o señora,<br><br>Quiero hacer una pregunta sobre mi seguro de automóvil. El 10 de mayo, tuve un accidente automovilístico en el que se dañó la parte delantera de mi automóvil. Además, tuve un golpe en el brazo derecho, me automediqué; sin embargo, el dolor persiste hasta el día de hoy y con mayor intensidad. Me gustaría saber si puedo ir a un hospital privado cubierto con el seguro de vehículo que tengo con ustedes y mandar mi auto al taller. Si la respuesta es afirmativa, quisiera información sobre los pasos que debo seguir para activar mi seguro de vehículo.<br><br>Quedo a la espera de su amable respuesta.<br>Atentamente,<br>Alvaro Maldonado",
      "Complejo": false,
      "TiempoEnvio": 0,
      "Respuestas": ["Alvaro", "Maldonado", "BXD-002", "Plan Plata", "01/11/2022", 1, 3, 2, 2, "respuesta libre"]
    }
  ];

  function build_case() {
    var case_container = document.getElementById('case-container');
    case_container.innerHTML = '';

    for (var i = 0; i < case_list.length; i++) {
      var case_id = i + 1;
      var case_value = case_list[i];

      if (case_value.Complejo) {
        var complex_template_copy = complex_template;
        complex_template_copy = complex_template_copy.replaceAll('{case_id}', case_id.toString());
        complex_template_copy = complex_template_copy.replaceAll('{case_texto}', case_value.Texto);
        complex_template_copy = complex_template_copy.replaceAll('{case_asunto}', case_value.Asunto);
        complex_template_copy = complex_template_copy.replaceAll('{case_reporte}', case_value.Reporte);
        case_container.innerHTML += complex_template_copy;
      }
      else {
        var simple_template_copy = simple_template;
        simple_template_copy = simple_template_copy.replaceAll('{case_id}', case_id.toString());
        simple_template_copy = simple_template_copy.replaceAll('{case_texto}', case_value.Texto);
        simple_template_copy = simple_template_copy.replaceAll('{case_asunto}', case_value.Asunto);
        case_container.innerHTML += simple_template_copy;
      }
    }
  }

  function build_event() {
    let input_list = [];
    for (var i = 0; i < case_list.length; i++) {
      let case_elem = document.getElementById('case-' + (i + 1).toString());
      let input_list = case_elem.getElementsByTagName('input');
      for (var j = 0; j < input_list.length; j++) {
        let input_item = input_list[j];
        input_item.addEventListener('input', input_event.bind(null, i, input_item.name));
      }
      input_list = case_elem.getElementsByTagName('textarea');
      for (var j = 0; j < input_list.length; j++) {
        let input_item = input_list[j];
        input_item.addEventListener('input', input_event.bind(null, i, input_item.name));
      }
    }
  }

  function build_page() {
    build_case();
    build_event();
    open_case(0);
  }

  function open_case(id) {
    for (var i = 0; i < case_list.length; i++) {
      let case_id = 'case-' + (i + 1).toString();
      let case_elem = document.getElementById(case_id);
      if (i == id) {
        case_elem.style.display = 'block';
      } else {
        case_elem.style.display = 'none';
      }
    }
  }

  function input_event(id, input_name) {
    var question_error_elem = document.getElementById(input_name + '-error');
    question_error_elem.style.display = 'none';
  }

  function case_result(id) {
    let case_elem = document.getElementById('case-' + (id + 1).toString());
    let input_list = case_elem.getElementsByTagName('input');
    let ans_list = [];

    let item_id_prev = '';
    let item_value_prev = -1;

    for (var i = 0; i < input_list.length; i++) {
      let input_item = input_list[i];
      if (input_item.id.search('-') == -1) {
        if (item_id_prev != '') {
          ans_list.push(item_value_prev);
          item_value_prev = -1;
          item_id_prev = '';
        }
        if (input_item.type == 'date' && input_item.value != '') {
          let date_item = input_item.value.split('-');
          ans_list.push(date_item[2] + '/' + date_item[1] + '/' + date_item[0]);
        } else {
          ans_list.push(input_item.value);
        }
      } else {
        let item_id = input_item.id.split('-')[0];
        let sub_item_id = input_item.id.split('-')[1];

        if (item_id_prev == '') {
          item_id_prev = item_id;
        }

        if (item_id_prev != item_id) {
          ans_list.push(item_value_prev);
          item_value_prev = -1;
          item_id_prev = item_id;
        }

        if (input_item.checked) {
          item_value_prev = input_item.value;
        }
      }
    }
    if (item_id_prev != '') {
      ans_list.push(item_value_prev);
      item_value_prev = -1;
      item_id_prev = '';
    }

    input_list = case_elem.getElementsByTagName('textarea');

    for (var i = 0; i < input_list.length; i++) {
      let input_item = input_list[i];
      ans_list.push(input_item.value);
    }

    return ans_list;
  }

  function case_question(id) {
    let case_elem = document.getElementById('case-' + (id + 1).toString());
    let input_list = case_elem.getElementsByTagName('input');
    let question_list = [];

    for (var i = 0; i < input_list.length; i++) {
      let input_item = input_list[i];
      let item_name = input_item.name;
      
      if (question_list.length == 0) {
        question_list.push(item_name);
      } else {
        if (question_list[question_list.length - 1] != item_name) {
          question_list.push(item_name);
        }
      }
    }

    input_list = case_elem.getElementsByTagName('textarea');

    for (var i = 0; i < input_list.length; i++) {
      let input_item = input_list[i];
      question_list.push(input_item.name);
    }

    return question_list;
  }

  function case_validate(id, show_alert=true) {
    let result = case_result(id);
    let question = case_question(id);
    let is_correct = true;
    
    for (var i = 0; i < result.length; i++) {
      if (case_list[id].Respuestas[i] == 'respuesta libre' && result[i] != '') {
        continue;
      }
      if (case_list[id].Respuestas[i] != result[i]) {
        is_correct = false;
        if (show_alert) {
          var question_error_elem = document.getElementById(question[i] + '-error');
          question_error_elem.style.display = 'block';
        }
      }
    }

    return is_correct;
  }

  function case_validate_button(case_id) {
    if (case_validate(case_id - 1)) {
      let correct_elem = document.getElementById('alert-correct-answer');
      correct_elem.style.display = 'block';
      setTimeout(function () { correct_elem.style.display = 'none'; }, 5 * 1000);
      let all_correct = true;
      for (var i = 0; i < case_list.length; i++) {
        if (i == (case_id - 1)) {
          continue;
        }
        if (!case_validate(i, false)) {
          all_correct = false;
          break;
        }
      }
      if (all_correct) {
        var submit_elem = document.getElementById('submit-button');
        submit_elem.style.display = 'block';
      }
    } else {
      let error_elem = document.getElementById('alert-wrong-answer');
      error_elem.style.display = 'block';
      setTimeout(function () { error_elem.style.display = 'none'; }, 5 * 1000);
    }
  }

  function validate_answers() {
    let error_count = 0
    for (var i = 0; i < case_list.length; i++) {
      if (!case_validate(i)) {
        error_count++;
        var error_count_elem = document.getElementById('case_' + (i + 1).toString() + '_error_count');
        error_count_elem.value = parseInt(error_count_elem.value) + 1;
      }
    }
    if (error_count > 0) {
      let error_elem = document.getElementById('alert-wrong-answer');
      error_elem.style.display = 'block';
      setTimeout(function () { error_elem.style.display = 'none'; }, 5 * 1000);
      return false;
    } else {
      var end_date_elem = document.getElementById('end_date');
      end_date_elem.value = Date.now();
      return true;
    }
  }

  build_page();

</script>

<div class="alert alert-danger" role="alert" id="alert-wrong-answer" style="display: none;">
  Algunas respuestas estan mal
</div>

<div class="alert alert-success" role="alert" id="alert-correct-answer" style="display: none;">
  Las respuestas estan correctas
</div>

<button onclick="validate_answers()" class="otree-btn-next btn btn-success" id="submit-button" style="display: none;">
  Siguiente
</button>

{{ endblock }}